---------------------------------
-- Generated By: SR Cutscene Exporter
-- Cutscene: vk09_scene02
-- Exported By: Ev.Religioso
---------------------------------


function cutscene_main()
	load_chunk("sr_chunk34", true )
	load_chunks("sr_chunk34_vk09", "sr_chunk34")
	thread_new_cutscene_shot("shot1", 1)
	thread_new_cutscene_shot("shot2", 2)
	thread_new_cutscene_shot("shot3", 3)
end

function shot1()
	local excluded_lights_1 = {"PentSpot07", "PentSpot14", "PentSpot39", "PentSpot40", "PentSpot41", "PentSpot47", "PentSpot48", "PentBB Omni05", "PentBB Omni08", "PentSpot_50", "PentSpot_53", "PentSpot_54", "PentSpot_57", "PentSpot_58", "PentSpot_59", "PentSpot_elevWall"}
	light_set_lights(excluded_lights_1, 16, false)

	local included_lights_1 = {"PentSpot_51", "BB Omni01", "PentSpot_52", "PentSpot_55", "PentSpot_56", "PentBB Omni09", "PentSpot_elevWall01"}
	light_set_lights(included_lights_1, 7, true)

	fade_in(0.5)
	select_slate("slate_vk09_scene02")
	character_show("#PLAYER#")
	teleport_to_slate_pos("CS_johnny", 1.348, -0.033, -2.256, "slate_vk09_scene02")
	play_custom_action_do("CS_johnny", "vk09_scene02_johnny_1")
	teleport_to_slate_pos("#PLAYER#", 0.826, -0.042, -0.431, "slate_vk09_scene02")
	play_custom_action_do("#PLAYER#", "vk09_scene02_player_1")
	teleport_to_slate_pos("CS_king", -0.82, -0.043, -2.014, "slate_vk09_scene02")
	play_custom_action_do("CS_king", "vk09_scene02_king_1")
	teleport_to_slate_pos("CS_DoorA", 1.622, 0.0, -3.413, "slate_vk09_scene02")
	play_custom_action_do("CS_DoorA", "vk09_scene02_doorA_1")
	teleport_to_slate_pos("CS_doorB", 1.622, 0.0, -3.413, "slate_vk09_scene02")
	play_custom_action_do("CS_doorB", "vk09_scene02_doorb_1")
	set_level_lights(false)
	set_human_cutscene_weapon("ak47", "CS_johnny")
	set_human_cutscene_weapon("ak47", "CS_king")
end

function shot2()
	local excluded_lights_2 = {"PentSpot07", "PentSpot14", "PentSpot39", "PentSpot40", "PentSpot41", "PentSpot47", "PentSpot48", "PentBB Omni05", "PentBB Omni08", "PentSpot_50", "PentSpot_51", "PentSpot_53", "PentSpot_54", "PentSpot_55", "PentSpot_56", "PentSpot_57", "PentSpot_58", "PentSpot_59"}
	light_set_lights(excluded_lights_2, 18, false)

	local included_lights_2 = {"BB Omni01", "PentSpot_52", "PentBB Omni09", "PentSpot_elevWall", "PentSpot_elevWall01"}
	light_set_lights(included_lights_2, 5, true)

	teleport_to_slate_pos("CS_johnny", 2.114, -0.035, -3.546, "slate_vk09_scene02")
	play_custom_action_do("CS_johnny", "vk09_scene02_johnny_2")
	teleport_to_slate_pos("#PLAYER#", 1.747, -0.035, -2.924, "slate_vk09_scene02")
	play_custom_action_do("#PLAYER#", "vk09_scene02_player_2")
	teleport_to_slate_pos("CS_king", 0.808, -0.045, -3.371, "slate_vk09_scene02")
	play_custom_action_do("CS_king", "vk09_scene02_king_2")
	teleport_to_slate_pos("CS_DoorA", 1.622, 0.0, -3.413, "slate_vk09_scene02")
	play_custom_action_do("CS_DoorA", "vk09_scene02_doorA_2")
	teleport_to_slate_pos("CS_doorB", 1.622, 0.0, -3.413, "slate_vk09_scene02")
	play_custom_action_do("CS_doorB", "vk09_scene02_doorb_2")
	set_far_clip(5)
end

function shot3()
	local excluded_lights_3 = {"PentSpot07", "PentSpot14", "PentSpot39", "PentSpot40", "PentSpot41", "PentSpot47", "PentSpot48", "PentBB Omni05", "PentBB Omni08", "PentSpot_50", "PentSpot_51", "PentSpot_53", "PentSpot_54", "PentSpot_55", "PentSpot_56", "PentSpot_57", "PentSpot_58", "PentSpot_59"}
	light_set_lights(excluded_lights_3, 18, false)

	local included_lights_3 = {"BB Omni01", "PentSpot_52", "PentBB Omni09", "PentSpot_elevWall", "PentSpot_elevWall01"}
	light_set_lights(included_lights_3, 5, true)

	teleport_to_slate_pos("CS_johnny", 2.731, -0.035, -4.319, "slate_vk09_scene02")
	play_custom_action_do("CS_johnny", "vk09_scene02_johnny_3")
	teleport_to_slate_pos("#PLAYER#", 1.688, -0.072, -3.72, "slate_vk09_scene02")
	play_custom_action_do("#PLAYER#", "vk09_scene02_player_3")
	teleport_to_slate_pos("CS_king", 0.292, -0.046, -3.043, "slate_vk09_scene02")
	play_custom_action_do("CS_king", "vk09_scene02_king_3")
	teleport_to_slate_pos("CS_DoorA", 1.622, 0.0, -3.413, "slate_vk09_scene02")
	play_custom_action_do("CS_DoorA", "vk09_scene02_doorA_3")
	teleport_to_slate_pos("CS_doorB", 1.622, 0.0, -3.413, "slate_vk09_scene02")
	play_custom_action_do("CS_doorB", "vk09_scene02_doorb_3")
	fade_out(0.5)
	set_far_clip(5)
end

function cutscene_abort()
	letterbox_fade_out(true)
	fade_out(0.5)
	character_show("#PLAYER#")
	set_far_clip(5000)
end

function cutscene_end()
	character_show("#PLAYER#")
	stop_custom_actions("CS_johnny")
	stop_custom_actions("#PLAYER#")
	stop_custom_actions("CS_king")
	stop_custom_actions("CS_DoorA")
	stop_custom_actions("CS_doorB")
	letterbox_fade_out(true)
	fade_out(0.5)
	set_far_clip(5000)
end
